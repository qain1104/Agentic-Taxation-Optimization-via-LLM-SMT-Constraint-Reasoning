version: "3.9"

services:
  backend:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: tax-backend
    env_file:
      - .env
    environment:
      - RAG_CHROMA_DIR=/app/agents/rag/chroma
      - RAG_COLLECTION=tax_handbook
      - EMBED_MODEL=text-embedding-3-small
      - TAX_LOG_FILE=/app/logs/tax_app.log
    ports:
      - "32770:32770"
    volumes:
      - ./logs:/app/logs
      - ./reports:/app/reports
    restart: unless-stopped
    networks:
      - default
